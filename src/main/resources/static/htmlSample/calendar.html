<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
<style>
  body {
    margin: 40px 10px;
    padding: 0;
    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
    font-size: 11px;
    height:100%;
  }
  
  @media screen and (max-width:500px){
      body {
        margin: 40px 10px;
        padding: 0;
        font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
        font-size: 11px;
        height:100%;
      }
      .fc-toolbar-title{
        font-size: 10px !important;
      }
  }
  @media screen and (min-width:501px){
      body {
        margin: 40px 10px;
        padding: 0;
        font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
        font-size: 14px;
        height:100%;
      }
  }

  #calendar {
    max-width: 1400px;
    min-height: 500px;
    margin: 0 auto;
  }
  
  /*요일*/
  .fc-col-header-cell-cushion {
    color: #000;
  }
  .fc-col-header-cell-cushion:hover {
    text-decoration: none;
    color:#000;
  }
  /*일자*/
  .fc-daygrid-day-number{
    color: #000;
    font-size:2em;
  }
  
  /*종일제목*/
  .fc-event-title.fc-sticky{
    
    font-size:2em;
  }
  /*more버튼*/ 
  .fc-daygrid-more-link.fc-more-link{
    color: #000;
  }
  /*일정시간*/
  .fc-daygrid-event > .fc-event-time{
    color:#000;
  }
  /*시간제목*/
  .fc-daygrid-dot-event > .fc-event-title{
    color:#000 !important;
    font-size:2em;
  }
  /*가로 줄 - 월달력 종일 or 복수일자*/
  .fc-h-event{
    
  }
  /*세로 줄 - 주달력, 일달력*/
  .fc-v-event{
    
  }
  /*title 옆에 점*/
  .fc-daygrid-event-dot{
    
  }
  /*month/week/day*/
  .fc-button-active{
    border-color: #ffc107       !important;
    background-color: #ffc107   !important;
    color: #000                 !important;
    font-weight: bold           !important;
  }
  /*노란버튼*/
  .btn-warning{
    font-weight: bold;
  }
  /*모달 푸터*/
  .modal-footer{
    display:inline-block;
  }
  
</style>
    <script>

      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
           headerToolbar: {
                // left: 'prev,next today',
              left: '',
              center: 'title',
              right: 'timeGridDay,timeGridWeek,dayGridMonth,prev,next'
              // right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
           },
           views: {
               dayGridMonth: { // name of view
                   titleFormat: { year: 'numeric', month: '2-digit', day: '2-digit' }
                  // other view-specific options here
               }
           },
          dateClick: function() {
              console.log('a day has been clicked!');
          },
          eventClick : function(info) {
              //delete event from calender
             console.log('info.event.title =>'+info.event.title);
             console.log('info.event.id =>'+info.event.id);
             console.log('info.event info ' + info);
             console.log('info.event on ' + info.dateStr);
             console.log('info.event test =>' + info.event.test);
             console.log('info.event test =>' + info.event.test);
             console.log('info.event className =>' + info.event.className);
             console.log('info.event extendedProps =>' + info.event.extendedProps);
             console.log('info.event extendedProps.department =>' + info.event.extendedProps.department);
             console.log('info.event extendedProps.department1 =>' + info.event.extendedProps.department1);
             console.log('info.event extendedProps.department2 =>' + info.event.extendedProps.department2);
             console.log('info.event resourceEditable =>' + info.event.resourceEditable);
             
             
             //info.event.remove();
  
          },
          locale: 'ko', // 한국어 설정
          initialView: 'dayGridMonth',
          
          events: [
                  {
                    // Just an event, 기간설정
                    id: 001,
                    title: 'Long Event',
                    start: '2024-04-01',
                    end: '2024-04-03',
                    className: 'scheduler_basic_event',
                    resourceEditable: true 
                  },
                  {
                    // Just an event, 기간설정
                    id: 011,
                    title: 'Long Event',
                    start: '2024-03-27',
                    end: '2024-04-03',
                    className: 'scheduler_basic_event',
                    resourceEditable: true 
                  },
                  {
                    // Just an event, 기간설정
                    id: 012,
                    title: 'Long Event',
                    start: '2024-04-02T16:00:00',
                    end: '2024-04-04T16:00:00',
                    className: 'scheduler_basic_event',
                    resourceEditable: true 
                  },
                  {
                    // Custom repeating event
                    id: 02,
                    title: '일정1',
                    start: '2024-04-04T16:00:00',
                    className: 'scheduler_basic_event',
                    resourceEditable: true 
                  },
                  {
                    // Custom repeating event
                    id: 03,
                    title: '일정2',
                    start: '2024-04-05T16:00:00',
                    className: 'scheduler_basic_event',
                    extendedProps: {
                        department: 'BioChemistry'
                    } 
                  },
                  {
                      // Custom repeating event
                      id: 03,
                      title: '일정3',
                      start: '2024-04-05T16:00:00',
                      end: '2024-04-05T18:00:00',
                      className: 'scheduler_basic_event',
                      extendedProps: {
                          department: 'BioChemistry'
                      } 
                    },
                  {
                      title  : 'event1',
                      start  : '2024-04-06'
                  }
              ],
              editable: true,
        
          
        });//var calendar
        
        calendar.render();

        calendar.on('dateClick', function(info) {
            console.log('clicked on ' + info.dateStr);
            
            if( info.dateStr == "2024-05-01" ){
                var eventSources = calendar.getEventSources();
                console.log('EventSources => ' + eventSources);
                var len = eventSources.length;
                for (var i = 0; i < len; i++) { 
                    console.log('eventSources['+i+'] => ' + eventSources[i]);
                    eventSources[i].remove(); 
                } 
                //calendar.removeAllEvents();
            }else if( info.dateStr == "2024-05-02" ){
                calendar.next();
            }else if( info.dateStr == "2024-05-03" ){
                calendar.destroy();
            }else if( info.dateStr == "2024-05-04" ){
                console.log('2024-05-04 => ');
                var obj = new Object();
                obj.id    = '2024-05-04';
                obj.title = 'event';
                obj.start = '2024-05-04T12:30:00';
                obj.end   = '2024-05-04T15:30:00';
                obj.textColor = "#fff";
                obj.color = "#8dcc76";
                obj.test = "test";
                obj.description = "test1";
                obj.resourceEditable = true; 
                
                let departmentVal = {};
                departmentVal["department"]   = "department";
                departmentVal["department1"]  = "department1";
                departmentVal["department2"]  = "department2";
                departmentVal["shareYn"]   = 'Y';//resultData.data.list[i].SHARE_YN;
                
                obj.extendedProps = departmentVal;
                
                calendar.addEvent(obj);
                
                
                var obj1 = new Object();
                obj1.id    = '2024-05-05';
                obj1.title = 'event1';
                obj1.start = '2024-05-05T12:30:00';
                obj1.end   = '2024-05-05T15:30:00';
                obj1.textColor = "#fff";
                obj1.color = "#8dcc76";
                obj1.test = "test";
                obj1.description = "test1";
                obj1.resourceEditable = true; 
                
                let departmentVal1 = {};
                departmentVal1["department"]   = "department";
                departmentVal1["department1"]  = "department1";
                departmentVal1["department2"]  = "department2";
                departmentVal1["shareYn"]   = 'Y';//resultData.data.list[i].SHARE_YN;
                
                obj1.extendedProps = departmentVal1;
                
                calendar.addEvent(obj1);
                

                var obj2 = new Object();
                obj2.id    = '66';
                obj2.title = 'event6';
                obj2.start = '2024-05-06T12:30:00';
                obj2.end   = '2024-05-08T15:30:00';
                obj2.textColor = "#fff";
                obj2.color = "#8dcc76";
                obj2.test = "test";
                obj2.description = "test1";
                obj2.resourceEditable = true; 
                
                let departmentVal2 = {};
                departmentVal2["department"]   = "department";
                departmentVal2["department1"]  = "department1";
                departmentVal2["department2"]  = "department2";
                departmentVal2["shareYn"]   = 'Y';//resultData.data.list[i].SHARE_YN;
                
                obj2.extendedProps = departmentVal2;
                
                calendar.addEvent(obj2);
                
            }else if( info.dateStr == "2024-05-05" ){
                console.log('2024-05-05 => '+calendar.initialDate);
                calendar.initialDate;
                calendar.refetchEvents();
            }else if( info.dateStr == "2024-05-06" ){
                console.log('2024-05-06 => ');
                //calendar.fullCalendar( 'addEventSource', {id:123, stuff:'stuff'});
            }else if( info.dateStr == "2024-05-07" ){
                //calendar.fullCalendar( 'removeEvent', 222);
                var event = calendar.getEventById('2024-05-04') 
                let shareYn = event.extendedProps.shareYn;
                console.log("=== shareYn ==>"+shareYn);
                if( shareYn == 'N' ){
                	event.remove()	
                }else{
                	
                }
                
            }else if( info.dateStr == "2024-05-08" ){
                var eventSources = calendar.getEventSources();
                console.log('EventSources => ' + eventSources);
                var len = eventSources.length;
                for (var i = 0; i < len; i++) { 
                    console.log('eventSources['+i+'] => ' + eventSources[i]);
                    var obj = eventSources[i];
                    //console.log('obj.event.id => ' + obj.event.id); 
                } 
                //calendar.removeAllEvents();
            }else if( info.dateStr == "2024-05-09" ){
            	var eventArray = calendar.getEvents();
            	eventArray.forEach(function(element) {
           		  console.log("id ==>"+element.id);
                  console.log("shareYn ==>"+element.extendedProps.shareYn);
           		});
            }
            
            
            
            
            //calendar.next();
            //calendar.destroy();
        });
        /*  */
        calendar.on('eventClick', function(info) {
        	
        	console.log(JSON.stringify(info));
            console.log('eventClick info ' + info);
            console.log('eventClick on ' + info.dateStr);
            console.log('eventClick test =>' + info.test);
            console.log('eventClick description =>' + info.event.description);
            console.log('eventClick resourceEditable =>' + info.event.resourceEditable);
            
        });
        
        // ... other calendar things here...
        //calendar.fullCalendar( 'removeEvent', 123);
        /**/
        function test() {
            console.log("test");
            //calendar.destroy();
        }
        
      });

      function functionToExecute() {
          console.log("functionToExecute");
          test();
      }
    </script>
  </head>
  <body>
    <button onclick="functionToExecute()">Click</button>
    <div id='calendar'></div>
  </body>
</html>